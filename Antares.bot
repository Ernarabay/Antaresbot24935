from aiogram import Bot, Dispatcher, types, F
from aiogram.utils.keyboard import ReplyKeyboardBuilder
import asyncio
import g4f

# ----------- –¢–ï–ö–°–¢–´ -----------
TEX = """
Amantay Ernar - coder, speaker, CADer
Aripzhan Daulet - Builder, Capitan, Driver
Nurlankyzy Karakat - SMM, Designer,Handbook Engineer
Orumbek Alinur - CADer, Engineer
Dumankyzy Balym - Handbook Engineer
Kunzhan Ayazhan - Speaker Designer
Maratzhanuly Meirlan - Builder
Kurmanzhan Erasyl - Builder
Esenkeldi Inkar - Outreach
Tasbolat Gulsim - Portfolio Engineer 
Eryk Turan - Driver, Builder
Tolegen Abdimurat - Driver, CADer
Endykhan Karakat - Speaker, Designer
Nurmat Balnur - Designer, SMM
Almaskyzy Amina - SMM


"""

TEXT = """
FIRST TECH CHALLENGE CENTRAL ASIA –†–µ—Å–ø—É–±–ª–∏–∫–∞–ª—ã“õ Award
ALMATY REGIONAL FIRST CHAMPIONSHIP –†–µ—Å–ø—É–±–ª–∏–∫–∞–ª—ã“õ Award 
FIRST TECH CHALLENGE SEASON PARTICIPANT 2023-2024 
–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π Award
International Haileybury FIRST CHAMPIONSHIP - 2023 –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π Award
BREAKTHROUGH AWARD –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π Award
ZHYLANDY REGIONAL FIRST CHAMPIONSHIP –†–µ—Å–ø—É–±–ª–∏–∫–∞–ª—ã“õ Award
FIRST. GLOBAL CHALLENGE 2025 KAZAKHSTAN –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π Award
"""

# ------------- TOKEN -------------
TOKEN = "8503669068:AAGksJnX7KEwoYLazgESwtJXHxR5rSosbFw"  # ‚Üê –¢–í–û–ô –¢–û–ö–ï–ù –°–Æ–î–ê


# ----------- –ë–û–¢ –ò–ù–ò–¶ -----------
bot = Bot(token=TOKEN)
dp = Dispatcher()


# ----------- –ú–ï–ù–Æ -----------
def main_menu():
    kb = ReplyKeyboardBuilder()
    kb.button(text="ASK SOMETHINK ABOUT FTC")
    kb.button(text="OUR AWARDS")
    kb.button(text="TEAM MEMBERS")
    kb.adjust(1)
    return kb.as_markup(resize_keyboard=True)


# ----------- /start -----------
@dp.message(F.text == "/start")
async def start(message: types.Message):
    await message.answer(
        "Hello üëã\n" "We are FTC team Antares, what do you want to know",
        reply_markup=main_menu()
    )


# ----------- –ñ–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä -----------
@dp.message(F.text == "OUR AWARDS")
async def achievements(message: types.Message):
    await message.answer(TEXT)


# ----------- –ù–µ–≥—ñ–∑—ñ–Ω “õ–∞–ª–∞—É—à—ã–ª–∞—Ä -----------
@dp.message(F.text == "TEAM MEMBERS")
async def founders(message: types.Message):
    await message.answer(TEX)


# ----------- –°“±—Ä–∞“õ “õ–æ—é -----------
@dp.message(F.text == "ASK SOMETHINK ABOUT FTC")
async def ask(message: types.Message):
    await message.answer("Give me a questionüß¨")


# ----------- AI –ñ–ê–£–ê–ü -----------
@dp.message()
async def ai_answer(message: types.Message):
    try:
        wait_msg = await message.answer("1 minute... ‚è≥")

        response = await g4f.ChatCompletion.create_async(
            model="gpt-4o-mini",
            messages=[{"role": "user", "content": message.text}]
        )

        if not response or response.strip() == "":
            await wait_msg.edit_text("‚ö†Ô∏è AI –∂–∞—É–∞–ø –±–µ—Ä–º–µ–¥—ñ.")
            return

        await wait_msg.edit_text(response)

    except Exception as e:
        await message.answer("‚ö†Ô∏è “ö–∞—Ç–µ —à—ã“õ—Ç—ã. “ö–∞–π—Ç–∞–¥–∞–Ω –∂–∞–∑—ã–ø –∫”©—Ä.")
        print("AI ERROR:", e)


# ----------- –ó–ê–ü–£–°–ö -----------
async def main():
    print("–ë–æ—Ç —ñ—Å–∫–µ “õ–æ—Å—ã–ª–¥—ã...")
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())

